<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Find Nearest Carparks</title>
    <style>
      #find-carparks-btn {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>Find Nearest Carparks</h1>
    <form action="/results" method="get">
      <input type="hidden" name="lat" id="lat-input">
      <input type="hidden" name="lng" id="lng-input">
      <button id="find-carparks-btn" type="submit">Find nearest carparks</button>
    </form>
    <span id="waiting-loader">Please wait while we are getting your coordinates</span>
    
    <script>
      navigator.geolocation.getCurrentPosition(showPosition);
      
      function showPosition(position) {
        var lat = position.coords.latitude;
        var lng = position.coords.longitude;
        
        // show button after geolocation is complete
        document.getElementById("find-carparks-btn").style.display = "block";
        document.getElementById("waiting-loader").style.display = "none";
        
        // set hidden input values
        document.getElementById("lat-input").value = lat;
        document.getElementById("lng-input").value = lng;
      }
    </script>
  </body>
</html>
